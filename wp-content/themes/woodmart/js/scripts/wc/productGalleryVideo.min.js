(w=>{woodmartThemeModule.$document.on("wdReplaceMainGallery",function(){woodmartThemeModule.productVideoGallery()}),w.each(["frontend/element_ready/wd_single_product_gallery.default"],function(e,d){woodmartThemeModule.wdElementorAddAction(d,function(){woodmartThemeModule.productVideoGallery()})}),woodmartThemeModule.productVideoGallery=function(){var a=w(".woocommerce-product-gallery__wrapper:not(.quick-view-gallery)"),d=a.parents(".woocommerce-product-gallery"),e=w(".variations_form");function t(d){var a,e=d.find("iframe"),i=d.find(".wd-play-video"),o=new YT.Player(e[0],{events:{onReady:function(){d.hasClass("wd-video-muted")?o.mute():o.unMute();o.setLoop(!0),d.removeClass("wd-loading"),!d.hasClass("wd-video-playing")||woodmartThemeModule.$window.width()<=768&&e.attr("src").indexOf("autoplay=1")&&e.attr("src").indexOf("mute=1")?(d.addClass("wd-video-playing"),o.playVideo()):(d.removeClass("wd-video-playing"),o.pauseVideo())},onStateChange:function(e){d.hasClass("wd-overlay-hidden")&&(e.data===YT.PlayerState.PLAYING?r("hide"):e.data!==YT.PlayerState.PAUSED||d.hasClass("wd-video-design-native")||r("show"));a=e.data}}});i.on("click",function(){a===YT.PlayerState.UNSTARTED?"function"==typeof o.playVideo&&o.playVideo():d.hasClass("wd-video-playing")?(d.removeClass("wd-video-playing"),"function"==typeof o.pauseVideo&&o.pauseVideo()):(d.addClass("wd-video-playing"),"function"==typeof o.playVideo&&o.playVideo())})}function l(e){var d=e.find("iframe"),a=e.find(".wd-play-video"),i=new Vimeo.Player(d);i.setLoop(!0),e.hasClass("wd-video-muted")?i.setVolume(0):i.setVolume(1),i.on("timeupdate",function(){e.hasClass("wd-loading")&&(e.addClass("wd-video-playing"),e.removeClass("wd-loading"),e.hasClass("wd-overlay-hidden"))&&r("hide")}),!e.hasClass("wd-video-design-native")&&e.hasClass("wd-overlay-hidden")&&i.on("pause",function(){r("show")}),e.hasClass("wd-video-playing")?(i.pause(),e.removeClass("wd-video-playing")):i.play(),e.hasClass("wd-loaded")&&(e.addClass("wd-video-playing"),e.removeClass("wd-loading"),e.hasClass("wd-overlay-hidden")&&r("hide"),e.removeClass("wd-loaded")),a.on("click",function(){e.hasClass("wd-video-playing")?(e.removeClass("wd-video-playing"),i.pause()):(e.addClass("wd-video-playing"),i.play())})}function r(e){a.hasClass("wd-carousel")&&("hide"===e?d.addClass("wd-hide-overlay-info"):"show"===e&&d.removeClass("wd-hide-overlay-info"))}woodmartThemeModule.$document.on("click",".wd-carousel-item.wd-with-video .wd-play-video",function(e){e.preventDefault();var d,a,i,o,n,e=w(this).parents(".wd-carousel-item"),s=e.find("iframe");s.length||(s=e.find("video")),!e.hasClass("wd-inited")&&s.length&&((d=s.attr("src"))||(d=s.data("lazy-load"),s.attr("src",d)),d)&&(e.hasClass("wd-video-playing")||e.addClass("wd-loading"),s=d,(a=e).addClass("wd-inited"),s.indexOf("vimeo.com")+1?"undefined"==typeof Vimeo||void 0===Vimeo.Player?w.getScript(woodmart_settings.vimeo_library_url,function(){i=setInterval(function(){"undefined"!=typeof Vimeo&&(clearInterval(i),l(a))},100)}):l(a):s.indexOf("youtube.com")+1?"undefined"==typeof YT||void 0===YT.Player?(a.hasClass("wd-video-playing")&&a.find(".wd-video-actions").addClass("wd-loading"),w.getScript("https://www.youtube.com/player_api",function(){i=setInterval(function(){void 0!==YT.Player&&(clearInterval(i),t(a),a.find(".wd-video-actions").removeClass("wd-loading"))},100)})):t(a):(n=(o=a).find("video"),s=o.find(".wd-play-video"),n.on("loadedmetadata",function(){o.removeClass("wd-loading"),n[0].play(),o.addClass("wd-video-playing")}),o.hasClass("wd-overlay-hidden")&&(n.on("play",function(){r("hide")}),o.hasClass("wd-video-design-native")||n.on("pause",function(){r("show")})),o.hasClass("wd-video-muted")?n.prop("muted",!0):n.prop("muted",!1),o.hasClass("wd-video-playing")?(n[0].pause(),o.removeClass("wd-video-playing")):o.hasClass("wd-loaded")&&(o.removeClass("wd-loading"),n[0].play(),o.addClass("wd-video-playing")),s.on("click",function(){o.hasClass("wd-video-playing")?(n[0].pause(),o.removeClass("wd-video-playing")):(o.addClass("wd-video-playing"),n[0].play())})))}),woodmartThemeModule.$document.on("wdPhotoSwipeBeforeInited",function(e,d){d.listen("initialLayout",function(){void 0!==d.items&&d.items&&w.each(d.items,function(e,d){void 0!==d.mainElement&&d.mainElement.hasClass("wd-video-playing")&&d.mainElement.hasClass("wd-inited")&&d.mainElement.find(".wd-play-video").trigger("click")})}),d.listen("close",function(){void 0!==d.currItem.container&&w(d.currItem.container).parents(".pswp__container").find(".pswp__item").each(function(){var e=w(this).find(".wd-with-video.wd-video-playing");e.length&&e.find(".wd-play-video").trigger("click")})})}),a.find(".wd-carousel-item.wd-with-video").length&&document.querySelector(".woocommerce-product-gallery__wrapper:not(.quick-view-gallery)").addEventListener("wdSlideChange",function(e){e=e.target.swiper.slides[e.target.swiper.activeIndex];e.classList.contains("wd-overlay-hidden")&&(e.classList.contains("wd-video-playing")||e.classList.contains("wd-video-design-native")&&e.classList.contains("wd-video-hide-thumb"))?r("hide"):!d.hasClass("wd-hide-overlay-info")||e.classList.contains("wd-overlay-hidden")&&e.classList.contains("wd-video-playing")||r("show")}),e.length&&e.on("show_variation",function(e,d){a.find(".wd-carousel-item.wd-video-playing").each(function(){var e=w(this);(e.find(".wp-post-image").length||e.hasClass("wd-inited"))&&e.find(".wd-play-video").trigger("click")})})},w(document).ready(function(){woodmartThemeModule.productVideoGallery()})})(jQuery),window.addEventListener("load",function(){var e,d;document.querySelector("#www-widgetapi-script")&&document.querySelector(".woocommerce-product-gallery .wd-carousel-item.wd-with-video")&&((e=document.createElement("script")).src="//www.youtube.com/iframe_api",(d=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,d))});